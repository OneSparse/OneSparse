set client_min_messages = 'WARNING';
create extension if not exists onesparse;
\dT+ vector
                                        List of data types
  Schema   |  Name  | Internal name | Size | Elements |  Owner   | Access privileges | Description 
-----------+--------+---------------+------+----------+----------+-------------------+-------------
 onesparse | vector | vector        | var  |          | postgres |                   | 
(1 row)

select 'i4[1 2 3]'::vector;
     vector      
-----------------
 i4[0:1 1:2 2:3]
(1 row)

select ewise_add('i4[1 2 3]'::vector, 'i4[1 2 3]'::vector, 'plus_int32');
    ewise_add    
-----------------
 i4[0:2 1:4 2:6]
(1 row)

select ewise_mult('i4[1 2 3]'::vector, 'i4[1 2 3]'::vector, 'times_int32');
   ewise_mult    
-----------------
 i4[0:1 1:4 2:9]
(1 row)

select ewise_union('i4[1 2 3]'::vector, 42, 'i4[1 2 3]'::vector, 84, 'plus_int32');
   ewise_union   
-----------------
 i4[0:2 1:4 2:6]
(1 row)

select reduce_scalar('i4[1 2 3]'::vector, 'plus_monoid_int32');
 reduce_scalar 
---------------
 i4:6
(1 row)

select wait('i4[1 2 3]'::vector);
 wait 
------
 
(1 row)

select dup('i4[1 2 3]'::vector);
       dup       
-----------------
 i4[0:1 1:2 2:3]
(1 row)

select clear('i4[1 2 3]'::vector);
 clear 
-------
 
(1 row)

